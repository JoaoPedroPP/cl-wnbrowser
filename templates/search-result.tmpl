/** -*- mode: html -*- */

{namespace cl-wnbrowser.Templates}

{template result}

{call header}
   {param extratitle: $term /}
   {param term: $term /}
{/call}

<h2>{$numfound} result{if $numfound == 0 or $numfound > 1}s{/if}
    found for '{$term}'</h2>

{if $numfound > 0}
<div class="container">

  <div class="facets">
    <form id="formfacet" action="search" method="POST">
      <input type="hidden" name="term" value="{$term}"/>
      {if isNonnull($facets.rdf_type)}
      <div class="facettype">RDF Type:</div>
    
      {foreach $f in $facets.rdf_type}
      <input type="checkbox" name="fq_rdftype" {checked($f.name, $fq_rdftype)} value="{$f.name}" onchange="document.forms.formfacet.submit();">{$f.name} ({$f.count})</input><br/>
      {/foreach}
      {/if}

      {if isNonnull($facets.wn30_lexicographerfile)}
      <div class="facettype">Lexicographer file:</div>
      {foreach $f in $facets.wn30_lexicographerfile}
      <input type="checkbox" name="fq_lexfile" {checked($f.name, $fq_lexfile)} value="{$f.name}" onchange="document.forms.formfacet.submit();">{$f.name} ({$f.count})</input></br>
      {/foreach}
      {/if}
    </form>
  </div>
  
  <div class="searchresults">

    <ol start="{$start+1}">
    {foreach $document in $documents}
    
      {if issynset($document.rdf_type)}
        {call synset-entry}
          {param document: $document /}
	  {param term: $term /}
        {/call}
      {else}
        {call nomlex-entry}
          {param document: $document /}
	  {param term: $term /}
        {/call}
      {/if}
    {/foreach}
    </ol>

    <div class="navigation">
	{if $previous >= 0}
	<span class="txtPrev">
	  <a href="search?term={$term}&start={$previous}&fq={$fq}">&laquo; Previous</a>
	</span>
	{/if}

	{if $next < $numfound}
        <span class="txtNext">
	  <a href="search?term={$term}&start={$next}&fq={$fq}">Next &raquo;</a>
	</span>
	{/if}
    </div>
  </div>
</div>
{/if}

{if isNonnull($debug)}
<hr />
<p><tt>{$documents}</tt></p>
<hr />
<p><tt>{$facets}</tt></p>
{/if}

{call footer /}
{/template}
